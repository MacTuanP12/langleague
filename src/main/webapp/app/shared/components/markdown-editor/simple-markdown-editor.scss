.simple-markdown-editor {
  .EasyMDEContainer {
    .editor-toolbar {
      border: 1px solid #ced4da;
      border-bottom: none;
      border-radius: 0.25rem 0.25rem 0 0;
      background-color: #f8f9fa;

      button {
        color: #495057;
        border: none;
        background: transparent;

        &:hover {
          background-color: #e9ecef;
          color: #212529;
        }

        &.active {
          background-color: #dee2e6;
          color: #212529;
        }
      }
    }

    .CodeMirror {
      border: 1px solid #ced4da;
      border-top: none;
      border-radius: 0 0 0.25rem 0.25rem;
      font-size: 14px;
      line-height: 1.5;

      .CodeMirror-cursor {
        border-left: 2px solid #495057;
      }

      .CodeMirror-selected {
        background: #e3f2fd;
      }

      .CodeMirror-lines {
        padding: 10px;
      }
    }

    .editor-preview {
      border: 1px solid #ced4da;
      border-top: none;
      border-radius: 0 0 0.25rem 0.25rem;
      padding: 15px;
      background-color: #fff;

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        margin-top: 1em;
        margin-bottom: 0.5em;
        font-weight: 600;
      }

      p {
        margin-bottom: 1em;
      }

      ul,
      ol {
        margin-bottom: 1em;
        padding-left: 2em;
      }

      code {
        background-color: #f4f4f4;
        padding: 2px 4px;
        border-radius: 3px;
        font-size: 0.9em;
      }

      pre {
        background-color: #f4f4f4;
        padding: 10px;
        border-radius: 5px;
        overflow-x: auto;
        margin-bottom: 1em;

        code {
          background: none;
          padding: 0;
        }
      }

      blockquote {
        border-left: 4px solid #dee2e6;
        padding-left: 1em;
        margin-left: 0;
        color: #6c757d;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 1em;

        th,
        td {
          border: 1px solid #dee2e6;
          padding: 8px;
          text-align: left;
        }

        th {
          background-color: #f8f9fa;
          font-weight: 600;
        }
      }
    }

    // Fix fullscreen mode to stay within modal/container
    // Use higher z-index than Bootstrap modal (1050) but not too high to avoid conflicts
    &.CodeMirror-fullscreen {
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      height: 100vh !important;
      width: 100vw !important;
      z-index: 1060 !important; // Higher than modal (1050) but lower than toast (1080)
      border-radius: 0 !important;
    }
  }

  // Fix fullscreen container to respect modal boundaries
  .EasyMDEContainer.fullscreen {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    height: 100vh !important;
    width: 100vw !important;
    z-index: 1060 !important; // Higher than modal (1050) but lower than toast (1080)
    background-color: #fff;
    border-radius: 0 !important;

    .editor-toolbar {
      border-radius: 0 !important;
      position: sticky;
      top: 0;
      z-index: 1061; // Slightly higher than container
      max-width: 100vw !important; // Prevent overflow
      overflow-x: hidden !important;
    }

    .CodeMirror {
      border-radius: 0 !important;
      height: calc(100vh - 50px) !important; // Subtract toolbar height
    }

    .editor-preview {
      border-radius: 0 !important;
      height: calc(100vh - 50px) !important;
      overflow-y: auto;
    }
  }

  // Ensure markdown editor works properly inside modals
  // Modal has z-index 1050, so editor should be below that when not fullscreen
  .modal &,
  [class*='modal'] & {
    .EasyMDEContainer {
      position: relative !important;
      width: 100% !important;
      max-width: 100% !important;

      .editor-toolbar {
        z-index: 1; // Stay within modal context
        max-width: 100% !important; // Prevent toolbar from overflowing modal
        width: 100% !important;
        overflow-x: auto !important; // Allow horizontal scroll if needed
        box-sizing: border-box !important;

        // Ensure toolbar buttons don't overflow
        display: flex !important;
        flex-wrap: wrap !important;

        // Hide fullscreen button if it exists
        button[title*='fullscreen'],
        button[title*='Fullscreen'],
        button[title*='Full Screen'] {
          display: none !important;
        }
      }

      .CodeMirror {
        z-index: 1; // Stay within modal context
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
      }

      // Prevent fullscreen mode in modals
      &.fullscreen {
        position: relative !important;
        height: auto !important;
        width: 100% !important;
        max-width: 100% !important;
        z-index: 1 !important;
        left: 0 !important;
        right: 0 !important;
        top: 0 !important;
        bottom: 0 !important;

        .editor-toolbar {
          position: relative !important;
          width: 100% !important;
          max-width: 100% !important;
        }

        .CodeMirror {
          height: auto !important;
          max-height: 400px !important;
        }
      }
    }
  }
}
